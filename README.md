# No Smoke !

- イマドキのWebサービスをマッシュアップして「 禁煙店舗検索サービス - No Smoke !」を作ってみました。

タイトルままですが...

私は非喫煙者なんですが、ネットニュースで禁煙な店舗を探せるという某サービスが紹介されてました。

ほ〜と思ってサイトに行ってみると登録店舗が600ちょいしかありません...

なんじゃこりゃ？と...なら自分で作ってみようかと金曜日の夜からこの週末を使って空き時間で禁煙なお店を検索できるサービスを作ってみました、実質8時間くらいかな？

こんな短時間でサービス作れちゃうご時世なんですね、ほんとに驚きです。

ちなみに２０２０年４月からは禁煙店が一気に増えることになっていますが、ヤフーのＡＰＩは対応してくれるのでしょうか？？

## 利用したサービスやフレームワーク

簡単にリストアップします。どれも有名ですので個別には紹介しませんが。

1. [Vue.js](https://jp.vuejs.org/) : 言わずとしれたＵＩフレームワークです。シンプルで好きです。
2. [Firebase](https://firebase.google.com/?hl=ja) : 今のところHostingのみ利用させていただいてます。
3. [Bootstrap](https://getbootstrap.com/) : 非デザイナでもそれっぽいサイトができていいですね。
4. [Google Maps Platform](https://cloud.google.com/maps-platform?hl=ja) : 地図に利用させていただいてます。
5. [Yahoo YOLP](https://developer.yahoo.co.jp/webapi/map) : 施設検索に利用させていただいてます。Yahoo!ローカルサーチAPIの検索パラメータに禁煙度がついていたのがこのサービスを自作しようとおもったきっかけにもなってます。Yahooの地図が終了するとのことでGoogle Mapsに切り替えました。
6. [Font Awesome](https://fontawesome.com/) : アイコンで利用させていただいてます。
7. [Flaticon](https://www.flaticon.com/) : アイコン画像で利用させていただいてます。
8. [Google Chart API](https://developers.google.com/chart/image/docs/gallery/dynamic_icons) : 地図のピンで利用させていただいてます。

## 禁煙店が探せるサービス「No Smoke !」

サイトのURLはつぎのようになります、Firebaseでありがちなプロジェクト名つけるとproject-xxxxとランダムな文字列がついちゃうんですが、「no-smoke」は空いててラッキーでした。

**[http://no-smoke.web.app/](http://no-smoke.web.app/)**

また、Firebaseのホスティングは.firebaseapp.comでしたが、先月末から.web.appというのも使えるようになりました、シンプルでいい感じですよね？

### メイン画面

検索画面になります、【現在地】ボタンをタップすると（座標が取れたら）その場所が地図の中心になります。

一覧の【★】ボタンをタップするとお気に入りに登録できます。

### メニュー画面

ハンバーガーメニューをタップするとドロワー形式でメニューを出すようにしました。

ジャンル指定と、分煙でもいいかを選びます。

### お気に入り画面

お気に入りに登録してある施設一覧を表示します。

Mapボタンをタップするとその場所が地図の中心になります。

## 技術的ポイント

う〜む、ツール類が良すぎてほとんど悩むこともなかったんですが、工夫したのは設定オプションやお気に入りの施設のデータを[Vuex](https://vuex.vuejs.org/ja/)で管理しつつ[localStrage](https://developer.mozilla.org/ja/docs/Web/API/Window/localStorage)にも保存・読み込みすることでブラウザをリロードした時でも設定が保存されるようにしたことくらいですかねぇ〜

また、Yahoo!ローカルサーチAPIの結果ですがCORS制限に引っかかってしまうためどうしようかとおもいましたが、[vue-jsonp](https://www.npmjs.com/package/vue-jsonp)というまさに今回のためにあるようなモジュールがありましたのでそれを利用させていただきました。

また、[YahooのAPIには１日の利用制限がある](https://developer.yahoo.co.jp/appendix/rate.html)んですがそれを超過した時にエラーを判定してごめんね画面を出るようにしてあります。

ただそこそこ利用してもらわないと、この画面の確認ができないんですよね。😉

それにしても（繰り返しになりますが...）こんな簡単にWebサービス作れちゃうんですよね、恐るべしです。

※画面は開発中のスクリーンショットなので現時点と異なってる場合があります。
